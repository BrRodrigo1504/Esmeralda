<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmação de Pedido - Esmeralda</title>
    <style>
        /* Reset CSS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }
        
        .email-container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #ffffff;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }
        
        .logo {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: 'Playfair Display', serif;
        }
        
        .header-subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        
        /* Content */
        .content {
            padding: 30px 20px;
        }
        
        .greeting {
            font-size: 18px;
            margin-bottom: 20px;
            color: #2d3748;
        }
        
        .order-summary {
            background-color: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .order-number {
            font-size: 20px;
            font-weight: bold;
            color: #10b981;
        }
        
        .order-date {
            color: #718096;
            font-size: 14px;
        }
        
        .order-status {
            background-color: #10b981;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        /* Items */
        .items-section {
            margin: 20px 0;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 15px;
            border-bottom: 2px solid #10b981;
            padding-bottom: 5px;
        }
        
        .item {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .item:last-child {
            border-bottom: none;
        }
        
        .item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            margin-right: 15px;
        }
        
        .item-details {
            flex: 1;
        }
        
        .item-name {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 5px;
        }
        
        .item-customization {
            font-size: 14px;
            color: #718096;
            margin-bottom: 5px;
        }
        
        .item-quantity {
            font-size: 14px;
            color: #718096;
        }
        
        .item-price {
            font-weight: bold;
            color: #10b981;
            font-size: 16px;
        }
        
        /* Totals */
        .totals {
            background-color: #f7fafc;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .total-row.final {
            font-size: 18px;
            font-weight: bold;
            color: #10b981;
            border-top: 2px solid #e2e8f0;
            padding-top: 15px;
            margin-top: 15px;
        }
        
        /* Payment Info */
        .payment-info {
            background-color: #ebf8ff;
            border: 1px solid #bee3f8;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .payment-method {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .payment-icon {
            font-size: 24px;
            margin-right: 10px;
        }
        
        .payment-details {
            font-size: 14px;
            color: #2d3748;
        }
        
        .multibanco-reference {
            background-color: #ffffff;
            border: 2px solid #3182ce;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .reference-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .reference-value {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 16px;
        }
        
        /* Shipping Info */
        .shipping-info {
            background-color: #f0fff4;
            border: 1px solid #9ae6b4;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .shipping-address {
            font-size: 14px;
            line-height: 1.5;
        }
        
        .shipping-method {
            margin-top: 10px;
            font-weight: bold;
            color: #10b981;
        }
        
        /* Next Steps */
        .next-steps {
            background-color: #fffbeb;
            border: 1px solid #f6e05e;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .step {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .step-number {
            background-color: #10b981;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .step-text {
            font-size: 14px;
            color: #2d3748;
        }
        
        /* Footer */
        .footer {
            background-color: #2d3748;
            color: white;
            padding: 30px 20px;
            text-align: center;
        }
        
        .footer-section {
            margin-bottom: 20px;
        }
        
        .footer-title {
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .contact-info {
            font-size: 14px;
            line-height: 1.5;
        }
        
        .social-links {
            margin-top: 20px;
        }
        
        .social-link {
            display: inline-block;
            margin: 0 10px;
            color: #10b981;
            text-decoration: none;
            font-size: 14px;
        }
        
        .disclaimer {
            font-size: 12px;
            color: #a0aec0;
            margin-top: 20px;
            line-height: 1.4;
        }
        
        /* Responsive */
        @media (max-width: 600px) {
            .email-container {
                margin: 0;
                box-shadow: none;
            }
            
            .content {
                padding: 20px 15px;
            }
            
            .order-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .item {
                flex-direction: column;
                align-items: flex-start;
                text-align: left;
            }
            
            .item-image {
                margin-bottom: 10px;
                margin-right: 0;
            }
            
            .reference-row {
                flex-direction: column;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="email-container">
        <!-- Header -->
        <div class="header">
            <div class="logo">Esmeralda</div>
            <div class="header-subtitle">Joias Artesanais Portuguesas</div>
        </div>
        
        <!-- Content -->
        <div class="content">
            <div class="greeting">
                Olá {{customer_name}},
            </div>
            
            <p>Obrigado pela sua compra! O seu pedido foi recebido com sucesso e está a ser processado.</p>
            
            <!-- Order Summary -->
            <div class="order-summary">
                <div class="order-header">
                    <div>
                        <div class="order-number">Pedido #{{order_number}}</div>
                        <div class="order-date">{{order_date}}</div>
                    </div>
                    <div class="order-status">{{order_status}}</div>
                </div>
                
                <!-- Items Section -->
                <div class="items-section">
                    <div class="section-title">Itens do Pedido</div>
                    {{#each items}}
                    <div class="item">
                        <img src="{{image_url}}" alt="{{name}}" class="item-image">
                        <div class="item-details">
                            <div class="item-name">{{name}}</div>
                            {{#if customization}}
                            <div class="item-customization">{{customization}}</div>
                            {{/if}}
                            <div class="item-quantity">Quantidade: {{quantity}}</div>
                        </div>
                        <div class="item-price">{{price}}</div>
                    </div>
                    {{/each}}
                </div>
                
                <!-- Totals -->
                <div class="totals">
                    <div class="total-row">
                        <span>Subtotal:</span>
                        <span>€{{subtotal}}</span>
                    </div>
                    <div class="total-row">
                        <span>Envio:</span>
                        <span>{{#if free_shipping}}Grátis{{else}}€{{shipping_cost}}{{/if}}</span>
                    </div>
                    {{#if discount}}
                    <div class="total-row">
                        <span>Desconto:</span>
                        <span>-€{{discount}}</span>
                    </div>
                    {{/if}}
                    <div class="total-row final">
                        <span>Total:</span>
                        <span>€{{total}}</span>
                    </div>
                </div>
            </div>
            
            <!-- Payment Information -->
            <div class="payment-info">
                <div class="section-title">Informações de Pagamento</div>
                <div class="payment-method">
                    <span class="payment-icon">{{payment_icon}}</span>
                    <div>
                        <div style="font-weight: bold;">{{payment_method_name}}</div>
                        <div class="payment-details">{{payment_description}}</div>
                    </div>
                </div>
                
                {{#if multibanco_reference}}
                <div class="multibanco-reference">
                    <div style="font-weight: bold; margin-bottom: 10px; color: #3182ce;">
                        Dados para Pagamento Multibanco
                    </div>
                    <div class="reference-row">
                        <span>Entidade:</span>
                        <span class="reference-value">{{multibanco_reference.entity}}</span>
                    </div>
                    <div class="reference-row">
                        <span>Referência:</span>
                        <span class="reference-value">{{multibanco_reference.reference}}</span>
                    </div>
                    <div class="reference-row">
                        <span>Valor:</span>
                        <span class="reference-value">€{{multibanco_reference.amount}}</span>
                    </div>
                    <div class="reference-row">
                        <span>Válido até:</span>
                        <span>{{multibanco_reference.expiry_date}}</span>
                    </div>
                    <div style="margin-top: 15px; font-size: 12px; color: #718096;">
                        Use estes dados para pagar em qualquer caixa Multibanco ou homebanking.
                        O seu pedido será processado automaticamente após o pagamento.
                    </div>
                </div>
                {{/if}}
                
                {{#if mbway_info}}
                <div style="margin-top: 15px; padding: 15px; background-color: #f0fff4; border-radius: 6px;">
                    <div style="font-weight: bold; color: #10b981; margin-bottom: 5px;">
                        Pagamento MB WAY
                    </div>
                    <div style="font-size: 14px;">
                        {{mbway_info.message}}
                    </div>
                </div>
                {{/if}}
            </div>
            
            <!-- Shipping Information -->
            <div class="shipping-info">
                <div class="section-title">Informações de Envio</div>
                <div class="shipping-address">
                    <strong>{{customer_name}}</strong><br>
                    {{shipping_address.street}}, {{shipping_address.door_number}}<br>
                    {{shipping_address.postal_code}} {{shipping_address.city}}<br>
                    {{shipping_address.district}}, {{shipping_address.country}}
                </div>
                <div class="shipping-method">
                    Método de envio: {{shipping_method}}
                </div>
                <div style="margin-top: 10px; font-size: 14px; color: #2d3748;">
                    Prazo de entrega: {{delivery_time}}
                </div>
            </div>
            
            <!-- Next Steps -->
            <div class="next-steps">
                <div class="section-title">Próximos Passos</div>
                
                {{#if multibanco_reference}}
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-text">
                        <strong>Efetue o pagamento</strong><br>
                        Use os dados Multibanco acima para efetuar o pagamento até {{multibanco_reference.expiry_date}}.
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-text">
                        <strong>Confirmação automática</strong><br>
                        Após o pagamento, receberá automaticamente um e-mail de confirmação.
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-text">
                        <strong>Preparação do pedido</strong><br>
                        O seu pedido será preparado e enviado em 1-2 dias úteis.
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-text">
                        <strong>Acompanhe o envio</strong><br>
                        Receberá o código de rastreamento por e-mail quando o pedido for enviado.
                    </div>
                </div>
                {{else}}
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-text">
                        <strong>Pagamento confirmado</strong><br>
                        O seu pagamento foi processado com sucesso.
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-text">
                        <strong>Preparação do pedido</strong><br>
                        O seu pedido será preparado e enviado em 1-2 dias úteis.
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-text">
                        <strong>Acompanhe o envio</strong><br>
                        Receberá o código de rastreamento por e-mail quando o pedido for enviado.
                    </div>
                </div>
                {{/if}}
            </div>
            
            <p style="margin-top: 30px;">
                Se tiver alguma dúvida sobre o seu pedido, não hesite em contactar-nos. 
                Estamos aqui para ajudar!
            </p>
            
            <p style="margin-top: 20px; font-weight: bold;">
                Obrigado por escolher a Esmeralda!
            </p>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <div class="footer-section">
                <div class="footer-title">Contactos</div>
                <div class="contact-info">
                    E-mail: suporte@esmeralda.pt<br>
                    Telefone: +351 210 123 456<br>
                    Horário: Segunda a Sexta, 9h às 18h
                </div>
            </div>
            
            <div class="footer-section">
                <div class="footer-title">Siga-nos</div>
                <div class="social-links">
                    <a href="#" class="social-link">Facebook</a>
                    <a href="#" class="social-link">Instagram</a>
                    <a href="#" class="social-link">Pinterest</a>
                </div>
            </div>
            
            <div class="disclaimer">
                Este e-mail foi enviado para {{customer_email}} porque efetuou uma compra na nossa loja online.
                Se não reconhece esta transação, contacte-nos imediatamente.<br><br>
                
                Esmeralda - Joias Artesanais Portuguesas<br>
                NIF: 123456789 | Rua das Joias, 123, 1000-001 Lisboa, Portugal<br><br>
                
                © {{current_year}} Esmeralda. Todos os direitos reservados.
            </div>
        </div>
    </div>
</body>
</html>

